# Dong Chinese — Caddy reverse proxy
#
# The port number is rewritten by the deploy workflow on each zero-downtime swap.
# To enable HTTPS, replace ":80" with your domain (e.g. "dong-chinese.com")
# and Caddy will auto-provision a Let's Encrypt certificate.

:80 {
	encode zstd gzip

	# SvelteKit hashed immutable assets — cache forever
	handle /_app/immutable/* {
		header Cache-Control "public, max-age=31536000, immutable"
		reverse_proxy localhost:3000
	}

	handle {
		reverse_proxy localhost:3000
	}
}
